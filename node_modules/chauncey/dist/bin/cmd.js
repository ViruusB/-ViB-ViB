#!/usr/bin/env node
'use strict';

var _interopRequireDefault = require('babel-runtime/helpers/interop-require-default')['default'];

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _minimist = require('minimist');

var _minimist2 = _interopRequireDefault(_minimist);

var _ = require('..');

var _2 = _interopRequireDefault(_);

var argv = (0, _minimist2['default'])(process.argv.slice(2));

if (argv.h || argv.help) {
  console.log(_fs2['default'].readFileSync(_path2['default'].join(__dirname, 'usage.txt'), { encoding: 'utf8' }));
  process.exit(1);
}

var url = argv._[0];
if (!url) errorExit('url not specified');

(0, _2['default'])({
  url: argv._[0],
  done: function done(error, result) {
    if (error) errorExit(error);
    process.stdout.write(result);
    process.exit(0);
  }
});

function errorExit(error) {
  if (error.stack) console.error(error.stack);else console.error(String(error));
  process.exit(1);
}